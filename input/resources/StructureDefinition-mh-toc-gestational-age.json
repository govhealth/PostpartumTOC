{
  "resourceType": "StructureDefinition",
  "id": "mh-toc-gestational-age",
  "url": "http://fhir.org/guides/astp/postpartum-toc/StructureDefinition/mh-toc-gestational-age",
  "version": "1.0.0",
  "name": "MHTOCGestationalAgeProfile",
  "title": "MH TOC Gestational Age",
  "status": "active",
  "date": "2024-11-16",
  "description": "This profile sets minimum expectations for the Observation resource for querying the information related to the gestational age of an individualâ€™s pregnancy episode(s) of care. It identifies which core elements, extensions, vocabularies, and value sets **SHALL** be present in the resource and constrains the way the elements are used when using this profile. It provides the floor for standards development for specific use cases. /n The MH TOC Gestational Age profile leverages the US Core Simple Observation Profile and modifies it to include the capture of a gestational age for pregnancy episode(s) of care. It defines additional constraints, terminology, and bindings for standardized representation of gestational age. /n In this profile, gestational age is defined estimated gestational age (in weeks, or weeks and fraction of week) of the pregnancy at the time of the health care encounter (in contrast to the gestational age at birth), beginning from the time of fertilization. Gestational age needs to be correlated with the date the gestational age was documented. Gestational age (written with both weeks and days) is calculated using the best obstetrical estimated delivery date (EDD) based on the following formula: Gestational Age = (280 - (EDD - Reference Date))/ 7.",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Observation",
  "baseDefinition": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-simple-observation",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Observation.code",
        "path": "Observation.code",
        "short": "Gestational Age",
        "type": [
          { "code": "CodeableConcept" }
        ],
        "patternCodeableConcept": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "11977-6"
            }
          ]
        },
        "mustSupport": true
      },
      {
        "id": "Observation.encounter",
        "path": "Observation.encounter",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter"
            ],
            "_targetProfile": [
              {
                "extension": [
                  {
                    "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                    "valueBoolean": true
                  }
                ]
              }
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Observation.performer",
        "path": "Observation.performer",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitioner",
              "http://hl7.org/fhir/us/core/StructureDefinition/us-core-organization",
              "http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitionerrole"
            ],
            "_targetProfile": [
              {
                "extension": [
                  {
                    "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                    "valueBoolean": true
                  }
                ]
              },
              {
                "extension": [
                  {
                    "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                    "valueBoolean": false
                  }
                ]
              },
              {
                "extension": [
                  {
                    "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                    "valueBoolean": false
                  }
                ]
              }
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Observation.value[x]",
        "path": "Observation.value[x]",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Quantity",
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                "valueBoolean": true
              }
            ]
          }
        ],
        "mustSupport": true
      },
      {
      "id" : "Observation.value[x].code",
      "path" : "Observation.value[x].code",
      "short" : "Coded form of the unit", 
      "min" : 0,
      "max" : "1",

      "type" : [{
        "code" : "code"
      }],
      "binding" : {
        "strength" : "required",
        "valueSet" : "http://fhir.org/guides/astp/postpartum-toc/ValueSet/mh-toc-gestational-age-units"
      }
    }
  ]
  }
}
